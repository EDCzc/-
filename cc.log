C:\moom\NB\NB物理实验\nbData\b8de38aee6e79ae1668b2ac8c11f535b.nbres b8de38aee6e79ae1668b2ac8c11f535b.nbres b8de38aee6e79ae1668b2ac8c11f535b.nbres
 (function(){var R=Object.assign;var p=(j,I,v)=>new Promise((r,w)=>{var f=g=>{try{D(v.next(g))}catch(k){w(k)}},y=g=>{try{D(v.throw(g))}catch(k){w(k)}},D=g=>g.done?r(g.value):Promise.resolve(g.value).then(f,y);D((v=v.apply(j,I)).next())});(self.webpackChunkvirtuallab=self.webpackChunkvirtuallab||[]).push([[4932],{88506:function(j,I,v){"use strict";v.d(I,{D:function(){return r}});class r{static domQuerySelector(f,y){return f.shadowRoot?f.shadowRoot.querySelector(y):f.querySelector(y)}static querySelectorAll(f,y){return f.shadowRoot?f.shadowRoot.querySelectorAll(y):f.querySelectorAll(y)}static pointIndom(f,y){let D=!1;for(let g=0;g<y.length;g++){const k=y[g];if(!!k&&f.x>k.left&&f.x<k.right&&f.y>k.top&&f.y<k.bottom){D=!0;break}}return D}}},44932:function(j,I,v){"use strict";v.r(I),v.d(I,{nb_common_selector:function(){return $},nb_org_selector:function(){return A},nb_school_selector:function(){return H},nb_verification_code_form:function(){return W}});var r=v(54178),w=v(88506),f=v(12468);class y{constructor(t,i){this.form=t,this.opt=i,this.initData=this.getInitData(),this.validateFields=this.getInitDom(),this.addEvents()}insertAfter(t="",i){const o=i.parentNode;let a=document.createElement("div");a.innerText=t,a.className="invalid-feedback",i.classList.add("is-invalid"),o&&!o.querySelector(".invalid-feedback")&&o.insertBefore(a,i.nextSibling)}getInitData(){const{form:t}=this,{fields:i}=this.opt;let o=[];if(t){let a=[];a=t.querySelectorAll(".form-control"),a.forEach(l=>{l.name&&o.push({name:l.name,dom:l,value:l.value,rules:i[l.name].rules||null})})}return o}getInitDom(){const{form:t}=this,{fields:i}=this.opt;let o=[];for(const a in i){const l=i[a];o.push({dom:t.querySelector("input[name="+a+"]"),rules:l.rules,trigger:l.trigger||"change"})}return o}addEvents(){const{validateFields:t,form:i}=this;console.log("validateFields",t),i.addEventListener("submit",o=>{o.stopPropagation(),o.preventDefault()}),t.forEach(o=>{const{dom:a,rules:l,trigger:m}=o;a.addEventListener(m,b=>p(this,null,function*(){let L=yield this.validate(a,l,b.target.value);this.errorTip(a,L)}))})}removeEvents(){const{validateFields:t,form:i}=this;i.onSubmit=null,t.forEach(o=>{const{dom:a,trigger:l}=o;a[l]=null})}destroy(){this.removeEvents(),this.form=null,this.opt=null,this.initData=null,this.validateFields=[]}reset(){const{initData:t}=this;t.forEach(i=>{const{dom:o,value:a}=i;let l=o.nextElementSibling;o.classList.contains("is-invalid")&&o.classList.remove("is-invalid"),l&&l.classList.contains("invalid-feedback")&&l.remove(),o.value=a})}errorTip(t,i){if(i)this.insertAfter(i,t);else{let o=t.nextElementSibling;t.classList.contains("is-invalid")&&t.classList.remove("is-invalid"),o&&o.classList.contains("invalid-feedback")&&o.remove()}}validate(t,i,o){return p(this,null,function*(){let a;for(let l=0;l<i.length;l++){let m=i[l];if(a=yield new Promise(b=>{m.validate(m,o,b)}),a)break}return a})}valdates(){return p(this,null,function*(){const{initData:t}=this;let i=!0,o={};for(let a=0;a<t.length;a++){const{dom:l,rules:m}=t[a];if(m){let b=yield this.validate(l,m,l.value);b&&(i=!1,this.errorTip(l,b))}o[l.name]=l.value}return i?o:!1})}}const D=()=>{const e=document.getElementById("nb-bootstrap-common-css");return e?e.innerHTML:""},g=e=>{const i=Object.assign(Object.assign({},{animation:!0,autohide:!0,delay:3e3,type:"success",text:"\u64CD\u4F5C\u6210\u529F",zIndex:"1000",top:"20px"}),e);(function(o){let a=document.createElement("nb-pc-c-toast");a.animation=o.animation,a.autohide=o.autohide,a.delay=o.delay,a.type=o.type,a.text=o.text,a.zIndex=1e5,a.top=o.top,a.style="position: absolute; top: 40%; left: 0; bottom: 40%; right: 0; ",document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a)},a.delay+50)})(i)},k='.info-menu-selector{background:#fff;border:1px solid #d9d9d9;position:relative;border-radius:8px;width:calc(100% - 2px);height:46px;cursor:pointer}.info-menu-selector p{margin:0;line-height:46px;color:#ccc;font-size:16px;padding:0 0 0 10px}.info-menu-selector .info-menu-dark{color:#666}.info-menu-selector .info-menu-list{display:none;position:absolute;left:-1px;top:56px;background:#fff;border:1px solid #e6e6e6;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1);border-radius:4px;max-height:230px;width:100%}.info-menu-selector .info-menu-list .info-menu-list-box{background:#fff;position:relative;z-index:10;padding:5px 0;overflow-x:hidden;overflow-y:scroll;max-height:150px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item{line-height:30px;color:#333;font-size:16px;padding-left:13px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item:hover{background:#e6e6e6}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item span{color:#f00}.info-menu-selector .info-menu-list::after{z-index:9;content:"";border:1px solid #e6e6e6;position:absolute;top:-5px;right:15px;background:#fff;transform:rotateZ(45deg);width:10px;height:10px;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1)}.info-menu-selector .info-menu-list2{width:200%}.info-menu-selector .info-menu-list2 .info-menu-list-box{display:flex;flex-wrap:wrap}.info-menu-selector .info-menu-list2 .info-menu-list-box .info-menu-list-item{width:30px;line-height:30px;padding:0;text-align:center;font-size:12px}.info-menu-selector .info-menu-list2::after{left:15px}.info-menu-selector::after{content:"";width:18px;height:18px;position:absolute;right:12px;top:15px;background:url("assets/imgs/nbk/nbk_nb-perfect-info_sprite.png") no-repeat 0 -61px;background-size:418px 338px;transition-duration:0.1s}.info-menu-active{border:#fc6526 1px solid}.info-menu-active::after{transform:rotateZ(180deg)}.info-menu-active .info-menu-list{display:block}',$=class{constructor(e){(0,r.r)(this,e),this.itemEmitter=(0,r.c)(this,"itemEmitter",7),this.optionChange=(0,r.c)(this,"optionChange",7),this.initCommonComp=(0,r.c)(this,"initCommonComp",7),this.disabled=!1,this.skin=1,this.currValue="",this.selector={name:"",state:!1,data:[],currId:1,value:"\u8BF7\u9009\u62E9"},this.init=0,this.currId=0}wcurrData(e,t){console.log(e,"============== currValue ===============")}identityClick(e){const{selector:t}=this,{name:i}=t;this.disabled||(this.itemEmitter.emit(i),e.stopPropagation())}currDataListener(e,t){console.log(this.selector.name+"---> the currData has changed:"+e),this.value=e}initWatcher(e,t){console.log(`refresh the ${this.selector.name}`),this.initComponent()}componentWillLoad(){this.initComponent()}itemClickHandler(e){return p(this,null,function*(){const{selector:t}=this,{name:i}=t;console.log({type:i,id:this.itemId,value:this.value},"@itemClickHandler line:73"),this.chooseItem(e),this.optionChange.emit({type:i,id:this.itemId,value:this.value})})}initComp(e){const{selector:t}=this,{name:i}=t;console.log({type:i,id:this.itemId,value:this.value},"@initComp line:82"),this.chooseItem(e),this.initCommonComp.emit({type:i,id:this.itemId,value:this.value})}chooseItem(e){this.itemId=e.id,this.value=e.name?e.name:e}initComponent(){return p(this,null,function*(){const{selector:e,currData:t,currId:i}=this,{data:o,name:a}=e;console.log(`\u521D\u59CB\u5316${a}\u7EC4\u4EF6${t}: currId ${i}`),t&&(!i||i==0)?(console.log(`\u521D\u59CB\u5316\u4E0B\u62C9\u6846\u540D\u5B57\uFF0C\u65E0id, ${t}`),o.map(l=>{l.name==this.currData&&this.initComp(l)})):i&&(console.log("\u521D\u59CB\u5316\u4E0B\u62C9\u6846id"),o.map(l=>{l.id==this.currId&&this.initComp(l)}))})}render(){const{selector:e}=this,{data:t,name:i,state:o,value:a}=e;let l=this.value||a;return l=this.currValue||l,l.length>5&&(l=l.substr(0,4)+"..."),(0,r.h)("div",null,(0,r.h)("div",{style:{zIndex:this.zIndex,cursor:`${this.disabled?"not-allowed":"pointer"}`},class:o?"info-menu-selector info-menu-active":"info-menu-selector",onClick:m=>{this.identityClick(m)}},(0,r.h)("p",{class:(this.value||this.currValue)&&!this.disabled?"info-menu-dark":""},l),(0,r.h)("div",{class:`info-menu-list ${this.skin==2?"info-menu-list2":""}`},(0,r.h)("div",{class:"info-menu-list-box"},t.map(m=>(0,r.h)("div",{class:"info-menu-list-item",onClick:()=>{this.itemClickHandler(m)}},m.name||m))))))}static get watchers(){return{currValue:["wcurrData"],currData:["currDataListener"],init:["initWatcher"]}}};$.style=k;const U='.info-menu-selector{background:#fff;border:1px solid #d9d9d9;position:relative;border-radius:8px;width:calc(100% - 2px);height:46px;cursor:pointer}.info-menu-selector input{width:90%;border:none;padding:10px;height:26px;outline:none;border-radius:8px;font-size:16px;color:#666}.info-menu-selector input::-webkit-input-placeholder{color:#ccc;font-size:16px}.info-menu-selector p{margin:0;line-height:46px;color:#ccc;font-size:16px;padding:0 0 0 10px}.info-menu-selector .info-menu-list{display:none;position:absolute;left:-1px;top:56px;background:#fff;border:1px solid #e6e6e6;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1);border-radius:4px;max-height:230px;width:100%}.info-menu-selector .info-menu-list .info-menu-list-box{background:#fff;position:relative;z-index:10;padding:5px 0;overflow-x:hidden;overflow-y:scroll;max-height:220px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item{line-height:30px;color:#333;font-size:16px;padding-left:13px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item:hover{background:#e6e6e6}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item span{color:#f00}.info-menu-selector .info-menu-list::after{z-index:9;content:"";border:1px solid #e6e6e6;position:absolute;top:-5px;right:15px;background:#fff;transform:rotateZ(45deg);width:10px;height:10px;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1)}.info-menu-selector::after{content:"";width:18px;height:18px;position:absolute;right:12px;top:15px;background:url("assets/imgs/nbk/nbk_nb-perfect-info_sprite.png") no-repeat 0 -38px;background-size:418px 338px;transition-duration:0.1s}.info-menu-active{border:#fc6526 1px solid}.info-menu-active .info-menu-list{display:block}',A=class{constructor(e){(0,r.r)(this,e),this.inputWord=(0,r.c)(this,"inputWord",7),this.orgData=(0,r.c)(this,"orgData",7),this.selectData=[],this.disabled=!1,this.currValue="",this.key=""}componentDidLoad(){this.inputDom=w.D.domQuerySelector(this.ele,".input"),this.inputDom&&(this.inputDom.value=this.currValue)}currDataListener(e,t){let i=this.inputDom;this.currValue=e,i&&(i.value=e)}identityClick(e){return p(this,null,function*(){if(!this.key||this.key==""){this.showMenu=!1;return}this.showMenu=!this.showMenu,e.stopPropagation()})}wordsFilter(e,t){if(!this.showMenu)return e;var i=new RegExp(t,"g");return e.replace(i,"<span>"+t+"</span>")}itemClickHandler(e){return p(this,null,function*(){let t=this.inputDom;!t||(this.value=e.schoolname,t.value=e.schoolname,this.showMenu=!1,this.orgData.emit({id:e.id,credit_code:e.credit_code,schoolname:e.schoolname}))})}keyChange(e,t){clearTimeout(this.timer),this.timer=setTimeout(()=>{e&&e!=""?this.inputWord.emit(this.key):this.showMenu=!1},500)}watchData(e,t){e&&e.length>0?this.showMenu=!0:this.resetData()}watchShowMenu(e,t){this.showMenu=!1}showOption(){return p(this,null,function*(){this.selectData.length>0&&(this.showMenu=!0)})}handleChange(){return p(this,null,function*(){let e=this.inputDom;!e||(this.key=this.safeHtml(e.value))})}safeHtml(e){const t=/[\\\/\<\>]/g;let i="";return i=e.replace(t,""),i}resetData(){return p(this,null,function*(){this.value="";let e=this.inputDom;e&&(e.value=this.currValue?this.currValue:"")})}render(){const e=this;return(0,r.h)("div",{style:{zIndex:this.zIndex},class:this.showMenu?"info-menu-selector info-menu-active":"info-menu-selector"},(0,r.h)("input",{onClick:t=>{t.stopPropagation()},onFocus:()=>{this.showOption()},type:"text",class:"input",placeholder:"\u8BF7\u8F93\u5165\u673A\u6784\u540D\u79F0",onInput:()=>{this.handleChange()}}),(0,r.h)("div",{class:"info-menu-list"},(0,r.h)("div",{class:"info-menu-list-box"},this.selectData.map(t=>(0,r.h)("div",{class:"info-menu-list-item",onClick:()=>{e.itemClickHandler(t)},innerHTML:e.wordsFilter(t.schoolname,e.key)})))))}get ele(){return(0,r.g)(this)}static get watchers(){return{currValue:["currDataListener"],key:["keyChange"],selectData:["watchData"],reload:["watchShowMenu"]}}};A.style=U;const q='.award_btn_def{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -179px;width:180px;height:48px}.award_btn_hov{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -232px;width:180px;height:48px}.close_def,.info-menu-selector .info-supplement .info-close{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px 0px;width:14px;height:14px}.close_hov,.info-menu-selector .info-supplement .info-close:hover{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -19px;width:14px;height:14px}.error{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -84px;width:24px;height:24px}.input_icon{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -38px;width:18px;height:18px}.main_bg{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -142px;width:418px;height:32px}.main_bg_2{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -285px;width:355px;height:53px}.selector_icon{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -61px;width:18px;height:18px}.success{background-image:url(assets/imgs/nbk/nbk_nb-perfect-info_sprite.png);background-size:418px 338px;background-repeat:no-repeat;background-position:0px -113px;width:24px;height:24px}.info-menu-selector{background:#fff;border:1px solid #d9d9d9;position:relative;border-radius:8px;width:calc(100% - 2px);height:46px;cursor:pointer}.info-menu-selector .info-supplement{cursor:initial;position:absolute;top:-8px;width:100%;height:140px;background:#fff;box-shadow:3px 3px 6px rgba(0, 0, 0, 0.2);z-index:11}.info-menu-selector .info-supplement .info-supplement-input{padding-top:20px;text-align:center}.info-menu-selector .info-supplement .info-supplement-input input{width:70%;line-height:24px;padding-left:16px;border:none;border-left:3px solid #ffa018;outline:none}.info-menu-selector .info-supplement .info-warning{height:32px;font-size:12px;text-align:center;color:#ffa018;line-height:32px}.info-menu-selector .info-supplement .info-supplement-btn{padding-top:2px;text-align:center}.info-menu-selector .info-supplement .info-supplement-btn button{border:none;width:50px;height:30px;background:#fdbd63;cursor:pointer;color:#fff;border-radius:2px}.info-menu-selector .info-supplement .info-supplement-btn button:hover{background:#ffa018}.info-menu-selector .info-supplement .info-close{position:absolute;top:10px;right:10px;width:14px;height:14px}.info-menu-selector .info-supplement .info-close:hover{cursor:pointer}.info-menu-selector .info-menu-selector-disabled{line-height:46px;color:#ccc;font-size:16px;padding-left:10px}.info-menu-selector .info-menu-input-mask{position:absolute;left:0;top:0;width:100%;height:46px}.info-menu-selector .info-menu-choose{border:none;outline:none;margin:0;width:90%;height:26px;border-radius:8px;line-height:46px;color:#ccc;font-size:16px;padding:10px 0 10px 10px}.info-menu-selector .info-menu-dark{color:#666}.info-menu-selector .info-menu-list{display:none;position:absolute;left:-1px;top:56px;background:#fff;border:1px solid #e6e6e6;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1);border-radius:4px;max-height:320px;width:100%}.info-menu-selector .info-menu-list .info-menu-list-box{background:#fff;position:relative;z-index:10;padding:5px 0;overflow-x:hidden;overflow-y:scroll;max-height:220px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-py{font-size:16px;height:30px;line-height:30px;background:#efefef;text-indent:1em}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item{line-height:30px;color:#333;font-size:16px;padding-left:13px}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item:hover{background:#e6e6e6}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-list-item span{color:#f00}.info-menu-selector .info-menu-list .info-menu-list-box .info-menu-last{border-top:1px dashed #333}.info-menu-selector .info-menu-list::after{z-index:9;content:"";border:1px solid #e6e6e6;position:absolute;top:-5px;right:15px;background:#fff;transform:rotateZ(45deg);width:10px;height:10px;box-shadow:0px 0px 6px rgba(0, 0, 0, 0.1)}.info-menu-active{border:#fc6526 1px solid}.info-menu-active .info-menu-list{display:block}',H=class{constructor(e){(0,r.r)(this,e),this.itemEmitter=(0,r.c)(this,"itemEmitter",7),this.optionChange=(0,r.c)(this,"optionChange",7),this.supplyEmitter=(0,r.c)(this,"supplyEmitter",7),this.selectData=[],this.placeholder="",this.disabled=!1,this.currValue="",this.supply=!1,this.currSchools=[],this.key="",this.edit=!1,this.warning=!1,this.gblen=function(t){for(var i=0,o=0;o<t.length;o++)t.charCodeAt(o)>127||t.charCodeAt(o)==94?i+=2:i++;return i}}currDataListener(e,t){this.currValue=e}componentDidLoad(){this.inputDom=w.D.domQuerySelector(this.ele,".info-menu-choose");const e=this.inputDom;this.currValue&&!this.disabled&&(e.value=this.currValue)}identityClick(e){return p(this,null,function*(){!this.edit||this.disabled||(this.itemEmitter.emit(this.type),e.stopPropagation())})}selectDataListener(e,t){let i=this.inputDom;!i||(e.length?(this.edit=!0,this.currSchools=e):this.edit=!1,this.currValue?i.value=this.currValue:i.value="")}itemClickHandler(e){return p(this,null,function*(){let t=this.inputDom;!t||(this.itemId=e.id,this.value=e.schoolname?e.schoolname:e,this.key=this.value,t.value=e.schoolname?e.schoolname:e,this.keyWordsFilter(),this.optionChange.emit({type:this.type,id:this.itemId,value:this.value,credit_code:e.credit_code}),this.showMenu=!1)})}supplementName(e){return p(this,null,function*(){const{selectData:t}=this;this.supplementDom=w.D.domQuerySelector(this.ele,".info-supplement-text");const i=this.gblen(this.supplementDom.value);let o=this.inputDom,a=!1;if(i<8||i>60){this.warning=!0;return}if(!!o){this.warning=!1;for(let l of t)if(this.supplementDom.value===l.schoolname){a=!0,this.key=l.schoolname,this.keyWordsFilter(),this.optionChange.emit({type:this.type,id:l.id,value:l.schoolname,credit_code:l.credit_code}),o.value=l.schoolname,this.supplyEmitter.emit();break}a||(o.value=this.supplementDom.value,this.optionChange.emit({type:this.type,id:-1,value:this.supplementDom.value,credit_code:""}),this.supplyEmitter.emit()),e.stopPropagation()}})}spaceFilter(e){const t=/[\s\r\n]+/g;return e.replace(t,"")}handleChange(e){return p(this,null,function*(){let t=this.inputDom;if(!!t){if(e.target.value==""&&this.optionChange.emit({type:this.type,id:0,value:"",credit_code:""}),this.key=this.spaceFilter(t.value),!this.key||this.key===""){this.currSchools=this.selectData;return}this.showMenu=!0,clearTimeout(this.timer),this.timer=setTimeout(()=>{let i=!1;this.keyWordsFilter(),this.currSchools.map(o=>{if(this.key===o.schoolname)i=!0,this.itemId=o.id,this.value=o.schoolname,this.optionChange.emit({type:this.type,id:this.itemId,value:this.value,credit_code:o.credit_code});else{if(i)return;this.itemId="",this.value="",this.optionChange.emit({type:this.type,id:this.itemId,value:this.value,credit_code:o.credit_code})}})},500)}})}keyWordsFilter(){return p(this,null,function*(){this.currSchools=this.selectData.filter(e=>e.schoolname.indexOf(this.key)>-1),this.currSchools.length<1&&this.currSchools.push({id:-1,schoolname:"\u5176\u4ED6\u5B66\u6821",county_id:-1,first_py:"z",credit_code:""})})}showOption(){return p(this,null,function*(){this.currSchools.length>0&&(this.showMenu=!0)})}resetData(){return p(this,null,function*(){this.value="";let e=this.inputDom;e&&(e.value="")})}closeSupply(){return p(this,null,function*(){let e=this.inputDom;this.supplementDom=w.D.domQuerySelector(this.ele,".info-supplement-text");let t=this.supplementDom;!e||!t||(this.currSchools=this.selectData,e.value="",t.value="",this.optionChange.emit({type:this.type,id:0,value:"",credit_code:""}),this.supplyEmitter.emit())})}render(){let e="";return console.log(this.currValue,"<------ school current value"),(0,r.h)("div",null,(0,r.h)("div",{style:{zIndex:this.zIndex,cursor:`${this.disabled?"not-allowed":"pointer"}`},class:this.showMenu?"info-menu-selector info-menu-active":"info-menu-selector",onClick:t=>{this.identityClick(t)}},this.disabled?(0,r.h)("div",{class:"info-menu-selector-disabled"},this.currValue):(0,r.h)("input",{onFocus:()=>{this.showOption()},class:this.edit?"info-menu-dark info-menu-choose":"info-menu-choose",onInput:t=>{this.handleChange(t)}}),!this.edit&&(0,r.h)("div",{class:"info-menu-input-mask"}),(0,r.h)("div",{class:"info-menu-list"},(0,r.h)("div",{class:"info-menu-list-box"},this.currSchools.map(t=>t.schoolname=="\u5176\u4ED6"?!1:t.schoolname=="\u5176\u4ED6\u5B66\u6821"?(0,r.h)("div",{class:"info-menu-list-item info-menu-last",onClick:()=>{this.itemClickHandler(t)}},t.schoolname||t):t.first_py[0].toUpperCase()!==e?(e=t.first_py[0].toUpperCase(),(0,r.h)("div",null,(0,r.h)("div",{class:"info-menu-list-py"},e),(0,r.h)("div",{class:"info-menu-list-item",onClick:()=>{this.itemClickHandler(t)}},t.schoolname||t))):(0,r.h)("div",{class:"info-menu-list-item",onClick:()=>{this.itemClickHandler(t)}},t.schoolname||t)))),(0,r.h)("div",{class:"info-supplement",style:{display:`${this.supply?"block":"none"}`},onClick:t=>t.stopPropagation()},(0,r.h)("div",{class:"info-supplement-input"},(0,r.h)("input",{type:"text",maxlength:"60",placeholder:"\u8BF7\u8F93\u5165\u5B66\u6821\u5168\u79F0",class:"info-supplement-text"})),(0,r.h)("div",{class:"info-warning"},this.warning?"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u5B66\u6821\u5168\u79F0":""),(0,r.h)("div",{class:"info-supplement-btn"},(0,r.h)("button",{onClick:t=>this.supplementName(t)},"\u5B8C\u6210")),(0,r.h)("div",{class:"info-close",onClick:()=>this.closeSupply()}))))}get ele(){return(0,r.g)(this)}static get watchers(){return{currValue:["currDataListener"],selectData:["selectDataListener"]}}};H.style=q,function(e){if(typeof e=="undefined")throw new Error("Geetest requires browser environment");var t=e.document,i=e.Math,o=t.getElementsByTagName("head")[0];function a(n){this._obj=n}a.prototype={_each:function(n){var u=this._obj;for(var s in u)u.hasOwnProperty(s)&&n(s,u[s]);return this}};function l(n){var u=this;new a(n)._each(function(s,c){u[s]=c})}l.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var n=this;return b(n.type)?n.fallback_config[n.type]:n.new_captcha?n.fallback_config.fullpage:n.fallback_config.slide},_extend:function(n){var u=this;new a(n)._each(function(s,c){u[s]=c})}};var m=function(n){return typeof n=="number"},b=function(n){return typeof n=="string"},L=function(n){return typeof n=="boolean"},M=function(n){return typeof n=="object"&&n!==null},C=function(n){return typeof n=="function"},z=/Mobi/i.test(navigator.userAgent),V=z?3:0,_={},T={},Y=function(){var n=new Date,u=n.getFullYear(),s=n.getMonth()+1,c=n.getDate(),h=n.getHours(),d=n.getMinutes(),x=n.getSeconds();s>=1&&s<=9&&(s="0"+s),c>=0&&c<=9&&(c="0"+c),h>=0&&h<=9&&(h="0"+h),d>=0&&d<=9&&(d="0"+d),x>=0&&x<=9&&(x="0"+x);var S=u+"-"+s+"-"+c+" "+h+":"+d+":"+x;return S},J=function(){return parseInt(i.random()*1e4)+new Date().valueOf()},X=function(n,u){var s=t.createElement("script");s.charset="UTF-8",s.async=!0,/static\.geetest\.com/g.test(n)&&(s.crossOrigin="anonymous"),s.onerror=function(){u(!0)};var c=!1;s.onload=s.onreadystatechange=function(){!c&&(!s.readyState||s.readyState==="loaded"||s.readyState==="complete")&&(c=!0,setTimeout(function(){u(!1)},0))},s.src=n,o.appendChild(s)},ee=function(n){return n.replace(/^https?:\/\/|\/$/g,"")},te=function(n){return n=n.replace(/\/+/g,"/"),n.indexOf("/")!==0&&(n="/"+n),n},ie=function(n){if(!n)return"";var u="?";return new a(n)._each(function(s,c){(b(c)||m(c)||L(c))&&(u=u+encodeURIComponent(s)+"="+encodeURIComponent(c)+"&")}),u==="?"&&(u=""),u.replace(/&$/,"")},ne=function(n,u,s,c){u=ee(u);var h=te(s)+ie(c);return u&&(h=n+u+h),h},P=function(n,u,s,c,h,d,x){var S=function(E){var F=ne(s,c[E],h,d);X(F,function(B){if(B)if(E>=c.length-1){if(x(!0),u){n.error_code=508;var O=s+c[E]+h;se(n,O)}}else S(E+1);else x(!1)})};S(0)},oe=function(n,u,s,c){if(M(s.getLib)){s._extend(s.getLib),c(s);return}if(s.offline){c(s._get_fallback_config());return}var h="geetest_"+J();e[h]=function(d){d.status=="success"?c(d.data):d.status?c(s._get_fallback_config()):c(d),e[h]=void 0;try{delete e[h]}catch(x){}},P(s,!0,s.protocol,n,u,{gt:s.gt,callback:h},function(d){d&&c(s._get_fallback_config())})},se=function(n,u){P(n,!1,n.protocol,["monitor.geetest.com"],"/monitor/send",{time:Y(),captcha_id:n.gt,challenge:n.challenge,pt:V,exception_url:u,error_code:n.error_code},function(s){})},N=function(n,u){var s={networkError:"\u7F51\u7EDC\u9519\u8BEF",gtTypeError:"gt\u5B57\u6BB5\u4E0D\u662F\u5B57\u7B26\u4E32\u7C7B\u578B"};if(typeof u.onError=="function")u.onError(s[n]);else throw new Error(s[n])},re=function(){return e.Geetest||t.getElementById("gt_lib")};re()&&(T.slide="loaded"),e.initGeetest=function(n,u){var s=new l(n);n.https?s.protocol="https://":n.protocol||(s.protocol=e.location.protocol+"//"),(n.gt==="050cffef4ae57b5d5e529fea9540b0d1"||n.gt==="3bd38408ae4af923ed36e13819b14d42")&&(s.apiserver="yumchina.geetest.com/",s.api_server="yumchina.geetest.com"),n.gt&&(e.GeeGT=n.gt),n.challenge&&(e.GeeChallenge=n.challenge),M(n.getType)&&s._extend(n.getType),oe([s.api_server||s.apiserver],s.typePath,s,function(c){var h=c.type,d=function(){s._extend(c),u(new e.Geetest(s))};_[h]=_[h]||[];var x=T[h]||"init";x==="init"?(T[h]="loading",_[h].push(d),P(s,!0,s.protocol,c.static_servers||c.domains,c[h]||c.path,null,function(S){if(S)T[h]="fail",N("networkError",s);else{T[h]="loaded";for(var E=_[h],F=0,B=E.length;F<B;F=F+1){var O=E[F];C(O)&&O()}_[h]=[]}})):x==="loaded"?d():x==="fail"?N("networkError",s):x==="loading"&&_[h].push(d)})}}(window);const G=window.initGeetest,Q=(e,t,i,o)=>(0,f.a)(`${e}/v2/send_msg`,{method:"post",headers:{Authorization:`Bearer ${o}`},data:R(R({},t),{phone:i,token:`${o}`}),responseType:"json"}).then(a=>a).catch(a=>!1),K=(e,t)=>(0,f.a)(`${e}/v2/getcaptcha`,{headers:{Authorization:`Bearer ${t}`},method:"get",getResponse:!0,responseType:"json"}).then(i=>i).catch(i=>{console.log(i)}),Z=":host .nb-verification-code-form{display:flex}:host .nb-verification-code-form .col-8{flex:1}:host .nb-verification-code-form .col-8 .invalid-feedback{font-size:14px;line-height:24px;color:#FF8413;position:absolute}:host .nb-verification-code-form .col-4{margin-left:8px;width:146px}:host .nb-verification-code-form .col-4 .btn{width:100%;height:46px;border:none;background:#FF8413;font-size:14px;color:#fff;border-radius:8px;cursor:pointer}:host .nb-verification-code-form .col-4 .btn-disabled{pointer-events:none;cursor:not-allowed;background:#d4d4d4;color:#666}:host .nb-verification-code-form .form-control{background:#fff;border:1px solid #d9d9d9;position:relative;border-radius:8px;width:220px;cursor:pointer;padding:10px;height:46px;outline:none;border-radius:8px;font-size:16px;color:#666;box-sizing:border-box}:host .nb-verification-code-form .form-control::-webkit-input-placeholder{color:#ccc;font-size:16px}",W=class{constructor(e){(0,r.r)(this,e),this.commonCss=D(),this.btnText="\u83B7\u53D6\u9A8C\u8BC1\u7801",this.loading=!1,this.countDown=()=>{clearInterval(this.timer);let t=60;this.timer=setInterval(()=>{t--,this.btnText=`\u91CD\u65B0\u53D1\u9001(${t}s)`,t<1&&(this.loading=!1,this.btnText="\u91CD\u65B0\u83B7\u53D6",clearInterval(this.timer))},1e3)},this.resetCountDown=()=>{clearInterval(this.timer),this.loading=!1,this.btnText="\u83B7\u53D6\u9A8C\u8BC1\u7801"}}valdates(){return p(this,null,function*(){return this.form.valdates()})}reset(){return p(this,null,function*(){if(this.resetCountDown(),!!this.form)return this.form.reset()})}componentDidLoad(){setTimeout(()=>{this.form=new y(this.el.shadowRoot.querySelector("form"),{fields:{code:{trigger:"blur",rules:[{validate:(e,t,i)=>{t?i():i("\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A")}}]}}})})}getCode(){return p(this,null,function*(){const{host:e,getPhone:t,token:i}=this,o=yield t();if(console.log(i,"=== token ===="),!o||this.loading)return;this.loading=!0;let a=o.phone;const l=C=>{console.log("999",C),C.onReady(()=>{C.verify(),C.onClose(()=>{this.loading=!1})}).onSuccess(()=>p(this,null,function*(){let z=C.getValidate();z.g_challenge=M,console.log(z),this.loading=!0,this.countDown();const V=yield Q(e,Object.assign(Object.assign({},z),{type:5}),a,i);if(V.data){const _=V.data;_.success?g({text:"\u53D1\u9001\u6210\u529F"}):g({text:_.msg,type:"error"})}else g({text:"\u53D1\u9001\u5931\u8D25",type:"error"})})).onError(z=>{this.loading=!1,console.log("\u9A8C\u8BC1\u5931\u8D25",z)})};let b=yield K(e,i),L=b.data.gt,M=b.data.challenge;G({gt:L,challenge:M,offline:!b.data.success,new_captcha:!0,product:"bind",width:"300px"},l)})}render(){const{loading:e,btnText:t}=this;return(0,r.h)(r.H,null,(0,r.h)("style",{type:"text/css"},this.commonCss),(0,r.h)("form",null,(0,r.h)("div",{class:"nb-verification-code-form"},(0,r.h)("div",{class:"col-8"},(0,r.h)("input",{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",autocomplete:"off",name:"code",type:"text",class:"form-control"})),(0,r.h)("div",{class:"col-4"},(0,r.h)("button",{class:`btn btn-primary ${e?"btn-disabled":""}`,onClick:this.getCode.bind(this)},t)))))}get el(){return(0,r.g)(this)}};W.style=Z}}]);
})()